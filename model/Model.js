function Delegate(f,e,l){var g=this;var r,h,d;var s=[];function c(v,u){var j="model/"+v+".js";var i=document.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",j);document.getElementsByTagName("head")[0].appendChild(i);i.onload=function(){s[u]=new window[v](t,k,q,m);setTimeout(function(w){w.parentNode.removeChild(w)},41,i)}}function q(y,z){var u=[];var w,v,x;for(w=0;w<y.length;w++){if(y[w]!=z){continue}x=0;for(v=0;v<t[w].length;v++){if(Math.abs(y[t[w][v][0]]+y[t[w][v][1]]+y[t[w][v][2]])==3){x=1;break}}if(x){continue}u.push(w)}if(u.length){return u}for(w=0;w<y.length;w++){if(y[w]!=z){continue}u.push(w)}return u}function m(y){var u=0;var w,v,x;for(w=0;w<y.length;w++){if(!y[w]){continue}u+=y[w]*24;for(v=0;v<t[w].length;v++){x=y[t[w][v][0]]+y[t[w][v][1]]+y[t[w][v][2]];if(Math.abs(x)!=2){continue}u+=x*2}for(v=0;v<k[w].length;v++){if(y[k[w][v]]){continue}u+=y[w]}}return u}function p(j,u){var i=0;for(o=0;o<j.length;o++){if(j[o]==u){i++}}if(i>3){return h.search_move}return d.search_move}function a(B,F,j,A){var w,E;if(!F){w={};w.value=m(B);return w}var x=new Date().getTime();var u=x-b;if(!A&&F>=3&&u>6000){F-=2}var z=A||p(B,j);var C=z(B,j);var y=[];while(C.length){E=Math.floor(Math.random()*C.length);y.push(C[E]);C.splice(E,1)}var D;for(var v=0;v<y.length;v++){w=a(y[v].board,(F-1),(j*-1),A);if(!w){continue}if(D===undefined||((j==1&&w.value>D.value)||(j==-1&&w.value<D.value))){D=w;D.args=y[v].args}}return D}var t=[];var k=[];var b;this.remove_piece=function(){var x=q(e,1);var A=-1;var y,w,z,u,v;for(y=0;y<x.length;y++){z=[];for(w=0;w<e.length;w++){z[w]=e[w]}z[x[y]]=0;u=m(z);if(A==-1||u<v){v=u;A=x[y]}}setTimeout(function(){f.remove_piece(A,"white")},101)};this.search_move=function(){var u;var v=5;var w=7;b=new Date().getTime();if(l.black>0){if(!r){r=s[0]}while(v>(l.white+l.black)){v-=2}u=a(e,v,-1,r.search_move);setTimeout(function(){f.set_piece.apply(undefined,u.args)},41)}else{if(!d){d=s[2];d.set_begin(r)}v=0;for(var j=0;j<e.length;j++){if(e[j]){v++}}v=(v>w)?w:v;if(v%2==0){v--}u=a(e,v,-1);setTimeout(function(){f.swap_pieces.apply(undefined,u.args)},41)}if(s.length<2){c("MovePiece",1);return}if(s.length<3){c("JumpPiece",2)}if(!h){h=s[1]}};var o,n;for(o=0;o<24;o+=2){t[o]=[];t[o].push([o,o+1,(o+2)%8+parseInt(o/8)*8]);t[o].push([(o+6)%8+parseInt(o/8)*8,(o+7)%8+parseInt(o/8)*8,o]);t[o+1]=[];t[o+1].push([o,o+1,(o+2)%8+parseInt(o/8)*8]);k[o]=[(o+7)%8+parseInt(o/8)*8,o+1];k[o+1]=[o,(o+2)%8+parseInt(o/8)*8]}for(o=1;o<8;o+=2){for(n=0;n<24;n+=8){t[o+n].push([o,o+8,o+16]);if(n>=8){k[o+n].push(o+n-8)}if(n<16){k[o+n].push(o+n+8)}}}c("setPiece",0)};