function MovePiece(d,b,f,c){function e(s,g,h){var u=f(s,(g*-1));var t=(g==1)?"white":"black";var o,m,r,q,n,l,k;var p=[];for(r=0;r<u.length;r++){q=u[r];for(o=0;o<h.length;o++){n={};n.args=[h[o][0],h[o][1],t];n.board=[];for(m=0;m<s.length;m++){n.board[m]=s[m]}n.board[h[o][0]]=0;n.board[h[o][1]]=g;n.board[q]=0;l=c(n.board);if(p.length<=o||((g==1&&l>k)||(g==-1&&l<k))){k=l;p[o]=n}}}return p}function a(s,g){var l=[];var h=[];var m=[];var k=[];var q,o,v,n;for(q=0;q<s.length;q++){if(s[q]==g){l.push(q)}}for(q=0;q<l.length;q++){for(o=0;o<b[l[q]].length;o++){if(s[b[l[q]][o]]){continue}h.push([l[q],b[l[q]][o]])}}for(q=0;q<h.length;q++){v=0;for(o=0;o<d[h[q][1]].length;o++){if((s[d[h[q][1]][o][0]]+s[d[h[q][1]][o][1]]+s[d[h[q][1]][o][2]])==(2*g)&&d[h[q][1]][o][0]!=h[q][0]&&d[h[q][1]][o][1]!=h[q][0]&&d[h[q][1]][o][2]!=h[q][0]){v=1;m.push(h[q]);break}}if(!v){k.push(h[q])}}var r=[];var w=e(s,g,m);for(q=0;q<w.length;q++){r.push(w[q])}var t=(g==1)?"white":"black";var p;var u={};for(q=0;q<k.length;q++){p={};p.args=[k[q][0],k[q][1],t];p.board=[];for(o=0;o<s.length;o++){p.board[o]=s[o]}p.board[k[q][0]]=0;p.board[k[q][1]]=g;n=c(p.board);if(!m.length){if(!u[k[q][0]]||((g==1&&n>u[k[q][0]])||(g==-1&&n<u[k[q][0]]))){u[k[q][0]]=n;r.push(p)}}else{if(!u.general||((g==1&&n>u.general)||(g==-1&&n<u.general))){u.general=n;r.push(p)}}}return r}this.search_move=a};